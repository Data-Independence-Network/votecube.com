<var
    style="
        background-color: #{getDimensionColor(dimension)};
        border-bottom-color: #{bottomBorderColor};
        border-top-color: #{topBorderColor};
        float: {float};
        margin: {margin};
    "
    on:click="fire('toggle')"
>
    {percentValue}%
</var>
<style>
    var {
        border-bottom: 3px solid;
        border-radius: 4px;
        border-top: 3px solid;
        color: black;
        display: block;
        font-size: 1.2em;
        font-style: normal;
        height: 50px;
        line-height: 46px;
        text-align: center;
        vertical-align: middle;
        width: 50px;
    }
</style>

<script>
import {getDimensionColor} from '../../../cube'

export default {
    computed: {
        bottomBorderColor: ({delta, dimension, displayValue}) => borderColor(dimension, displayValue, false),
        float: ({index, $verticalLayout}) => $verticalLayout && index == 0 ? 'right' : 'initial',
        margin: ({index, $verticalLayout}) => $verticalLayout && index == 1 ? 'auto' : 'initial',
        topBorderColor: ({delta, dimension, displayValue}) => borderColor(dimension, displayValue, true),
        percentValue: ({delta, displayValue}) => displayValue ? displayValue.value : ''
    },
    helpers: {
        getDimensionColor
    }
}

function borderColor(
    dimension,
    displayValue,
    positive
) {
    if(!displayValue
    || displayValue.positive === positive) {
        return '000'
    }

    return getDimensionColor(dimension)
}

</script>