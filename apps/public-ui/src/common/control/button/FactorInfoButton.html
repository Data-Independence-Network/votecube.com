<var
		on:click="fire('toggle')"
		class:pageInfo="isPage"
		class:confirmInfo="!isPage"
		style="
        background-color: #{getColor(delta, poll, axis)};
        border-bottom-color: #{bottomBorderColor};
        border-top-color: #{topBorderColor};
        float: {float};
        margin: {margin};
    "
>
	{percentValue}%
</var>
<style>
	var {
		border-bottom: 5px solid;
		border-radius: 3px;
		border-top: 5px solid;
		color: black;
		display: block;
		font-style: normal;
		text-align: center;
	}

	.pageInfo {
		font-size: 1.2em;
		height: 50px;
		line-height: 46px;
		width: 50px;
	}

	.confirmInfo {
		font-size: 1em;
		height: 42px;
		line-height: 38px;
		width: 42px;
	}

</style>

<script>
	import {getColor} from '../../../helpers/cube'

	export default {
		computed: {
			bottomBorderColor: ({axis, cubeView, delta, poll, voteDim}) =>
				borderColor(cubeView, delta, poll, axis, voteDim, -1),
			float: ({axis, position, $verticalLayout}) =>
				$verticalLayout && axis == 'x' && position != 'left'
					? 'right' : 'initial',
			isPage: ({mode}) => mode == 'page',
			margin: ({axis, position, $verticalLayout}) =>
				$verticalLayout && axis == 'y' && position != 'left'
					? 'auto' : 'initial',
			topBorderColor: ({axis, cubeView, delta, poll, voteDim}) =>
				borderColor(cubeView, delta, poll, axis, voteDim, 1),
			percentValue: ({cubeView, delta, voteDim}) =>
				getValue(cubeView ? voteDim.value : voteDim.factorValue)
		},
		helpers: {
			getColor
		}
	}

	function getValue(
		value
	) {
		return value === undefined ? '' : value
	}

	function borderColor(
		cubeView,
		delta,
		poll,
		axis,
		voteDim,
		dir
	) {
		if (!voteDim) {
			return '000'
		} else if (cubeView) {
			if (voteDim.dir === dir) {
				return '000'
			}
		} else {
			if (voteDim.factorDir === dir) {
				return '000'
			}
		}

		return getColor(delta, poll, axis)
	}

</script>