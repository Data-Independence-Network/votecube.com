{#if $forms}
<label
    class="field-label"
    use:for="{id}"
>{label}</label>
<input
    bind:value="field.value"
    class:invalid="touched && errors.length"
    class:requiredInvalid="field.validatorMap.required && errors.length"
    class:requiredValid="field.validatorMap.required && !errors.length"
    on:blur="onBlur(event)"
    on:input="onInput(event)"
    placeholder="{placeholder}"
    type="text"
    use:id="{id}"
    use:maxlength="field.maxLength"
>
    {#if touched}
        {#each errors as error}
<span class="pure-form-message error">{error.message}</span>
        {/each}
    {/if}
{/if}

<style>
    input {
        width: 100%;
    }
</style>

<script>
import store from '../../store.js'

export default {
    actions: {
        for(node, id) {
            if(id) {
                node.id = id;
            }
        },
        id(node, id) {
            if(id) {
                node.id = id;
            }
        },
        maxlength(node, maxLength) {
            if(maxLength) {
                node.maxLength = maxLength;
            }
        }
    },
    computed: {
        errors: ({delta, field}) => field.errors,
        label: ({delta, field}) => field.label,
        placeholder: ({delta, field}) => field.placeholder,
        touched: ({delta, field}) => field.touched
    },
    immutable: true,
    methods: {
        onBlur(event) {
            this.get().field.onBlur()
        },
        onInput(event) {
            this.get().field.onInput()
        }
    },
    oncreate() {
        this.get().field.pages.push(this)
    },
    store: () => store
}
</script>