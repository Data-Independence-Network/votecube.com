{#if $forms}
<a
    class="pure-button"
    class:invalid="touched && errors.length"
    class:requiredInvalid="field.validatorMap.required && errors.length"
    class:requiredValid="field.validatorMap.required && !errors.length"
    on:click="fire('select')"
    use:id="{id}"
>
    <table>
        <tr>
        <td>
            <slot name="icon"></slot>
        </td>
        <td>
            <slot name="text"></slot>
        </td>
        </tr>
    </table>
</a>
    {#if touched}
        {#each errors as error}
<span class="pure-form-message error">{error.message}</span>
        {/each}
    {/if}
{/if}

<style>

    a {
        margin: 5px 0;
        white-space: normal;
        width: 100%;
    }

    svg {
        float: left;
    }

    td {
        padding: 5px;
    }

</style>

<script>
import store from '../../store.js'

export default {
    actions: {
        id(node, id) {
            if(id) {
                node.id = id;
            }
        }
    },
    computed: {
        errors: ({delta, field}) => field.errors,
        touched: ({delta, field}) => field.touched
    },
    data() {
        return {
            iconWidth: 42
        }
    },
    methods: {
        onBlur(event) {
            this.get().field.onBlur()
        }
    },
    oncreate() {
        this.get().field.setAsField(this)
    },
    ondestroy() {
        this.get().field.removeComponent(this)
    },
    store: () => store
}
</script>