{#if form}
<form class="pure-form">
    <fieldset>
        <div class="pure-control-group">
            <ColorPicker
                field="{form.fields.name}"
            ></ColorPicker>
        </div>

        <nav class="pure-controls">
            <RightButton
                classes="submitButton"
                highlightColor="{submitHighlight}"
            ></RightButton>
        </nav>
    </fieldset>
</form>
{/if}
<script>
import RightButton from '../../common/control/button/RightButton.html'
import ColorPicker from '../../common/field/ColorPicker.html'
import {clearForm, ensureForm, navigateOnValid} from '../../forms'
import {loadForms} from '../../libs/forms'
import {loadUi} from '../../libs/text/ui'
import store from '../../store'

export default {
    components: {
        ColorPicker,
        RightButton
    },
    computed: {
        submitHighlight: ({isValid}) => isValid
        ? '0b0'
        : 'b00'
    },
    oncreate() {
        Promise.all([
            loadForms(this),
            loadUi(this.store, 'en-us'),
        ]).then(([
            {Field, FieldGroup, Validators},
            _,
            dimensions
        ]) => {
            const picker = new Field([
                Validators.required(),
            ])
            const pickColor = new FieldGroup('PickColor', {
                picker
            }, [], this.store.get().text.UI.Dimension)

            ensureForm(pickColor, this)
        })
    },
    ondestroy() {
        clearForm(this)
    },
    store: () => store
}
</script>