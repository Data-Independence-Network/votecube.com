<div>
    <section
            id="viewport"
            style="
  transform: scale({zoomFactor}, {zoomFactor});
"
    >
        <figure
                id="cube"
        >
            <div
                class="surface"
                id="s1"
            >
                <!--0-->
                Security: Trumps policies reduce military's over extension and let it focus on the
                real threats.
            </div>
            <div
                class="surface"
                id="s2"
            >
                <!--1-->
                Economy: Trump's policies give profound confidence to companies and are good for
                the economy.
            </div>
            <div
                class="surface"
                id="s3"
            >
                <!--2-->
                Equality: Trump's policies are better for equality because they are fighting the
                dominance of globalism and are bringing the jobs back.
            </div>
            <div
                class="surface"
                id="s4"
            >
                <!--3-->
                Economy: Trump's policies have no real effect on the economy, it's purely
                cyclical.
            </div>
            <div
                class="surface"
                id="s5"
            >
                <!--4-->
                Equality: Trump's policies are tailored with the interests of the wealthy in mind
                and hurt equality.
            </div>
            <div
                class="surface"
                id="s6"
            >
                <!--5-->
                Security: Trump's policies reduce the trust in our alliances and hurt the
                stability of the world.
            </div>
        </figure>
    </section>
    <nav
            style="
      margin-top: -25px;
      "
    >
        <ZoomPicker
            currentZoom="{currentZoom}"
            on:zoomChange="zoomChange(event)"
        />
        <table
                style="
                width: 100%;
                font-size: 3em;
                text-align: center;
            ">
            <tr>
                <td>
                    -
                </td>
                <td>
                    %
                </td>
                <td>
                    +
                </td>
            </tr>
            <LinearPositionPicker
                dimension="{currentValue.x}"
                on:move="move('x', event)"
                on:moveToValue="moveToValue('x', event)"
            />
            <LinearPositionPicker
                dimension="{currentValue.y}"
                on:move="move('y', event)"
                on:moveToValue="moveToValue('y', event)"
            />
            <LinearPositionPicker
                dimension="{currentValue.z}"
                on:move="move('z', event)"
                on:moveToValue="moveToValue('z', event)"
            />
        </table>
    </nav>
</div>

<script>
    import LinearPositionPicker from '../../common/control/LinearPositionPicker.html'
    import ZoomPicker from '../../common/control/ZoomPicker.html'

    export default {
        components: {
            LinearPositionPicker,
            ZoomPicker
        },
        data() {
            return {
                currentValue: {
                    x: {
                        color: 'FF0000',
                        dir: 1,
                        valid: true,
                        value: 0
                    },
                    y: {
                        color: 'FFFF00',
                        dir: 1,
                        valid: true,
                        value: 100
                    },
                    z: {
                        color: '00FF00',
                        dir: 1,
                        valid: true,
                        value: 0
                    },
                },
                currentZoom: 1,
                zoomFactor: 0.65,
            }
        },
        methods: {
            zoomChange(event) {
                let currentZoom = parseInt(event.target.value);
                console.log('zoomChange: ' + currentZoom);
                let zoomFactor;
                switch (currentZoom) {
                    case 0:
                        zoomFactor = 0.55;
                        break;
                    case 1:
                        zoomFactor = 0.65;
                        break;
                    case 2:
                        zoomFactor = 0.75;
                        break
                }
                this.set({currentZoom, zoomFactor});
                this.get().mutationApi.changeZoom(currentZoom)
            },
            move(
                dimension,
                direction
            ) {
                this.get().mutationApi.move(dimension, direction)
            },
            moveToValue(
                dimension,
                value
            ) {
                this.get().mutationApi.moveToValue(dimension, value)
            }
        },
        oncreate() {
            import('@votecube/cube-logic/lib/cube/eventListener').then((
                eventListener
            ) => {
            this.setCubeViewPort = (
                setMutationApi,
                callback
            ) => {
                setMutationApi(eventListener.setViewPort(
                    this._state.currentValue, callback))
            }
            this.setCubeViewPort((
                mutationApi
                ) => {
                    // console.log('setting mutationApi to: ' + mutationApi)
                    this.set({mutationApi})
                },
                (
                    currentValue
                ) => {
                    // console.log('currentValue: ' + currentValue)
                    this.set({currentValue})
                },
            )
            })

        },
        ondestroy() {
            // this fires when the component is
            // removed from the DOM
            console.log('in CubeVote ondestroy');
            this.setCubeViewPort((
                mutationApi
            ) => {
                this.set({mutationApi})
            })
        }
    }

</script>
