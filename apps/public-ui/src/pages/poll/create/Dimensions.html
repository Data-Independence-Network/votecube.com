{#if form}
<form class="pure-form">
    <fieldset>
        <IconBlock
            fieldGroup="{form.fields.first}"
            on:select="selectDimension(0)"
        >
            <div slot="icon">
                <DimensionIcon
                ></DimensionIcon>
            </div>
            <div slot="text">
            Select 1st Dimension
            </div>
        </IconBlock>
        <IconBlock
            fieldGroup="{form.fields.second}"
        >
            <div slot="icon">
                <DimensionIcon
                ></DimensionIcon>
            </div>
            <div slot="text">
            Select 2nd Dimension
            </div>
        </IconBlock>
        <IconBlock
            fieldGroup="{form.fields.third}"
        >
            <div slot="icon">
                <DimensionIcon
                ></DimensionIcon>
            </div>
            <div slot="text">
            Select 3rd Dimension
            </div>
        </IconBlock>
        <div class="pure-controls">
            <RightButton
                classes="submitButton"
                highlightColor="{submitHighlight}"
                on:select="submit()"
            ></RightButton>
        </div>
    </fieldset>
</form>
{/if}



<script>
import RightButton from '../../../common/control/button/RightButton.html'
import IconBlock from '../../../common/field/IconBlock.html'
import DimensionIcon from '../../../common/icon/DimensionIcon.html'
import {clearForm, ensureChildForm, navigateOnValid} from '../../../forms'
import * as routes from '../../../routes'
import store from '../../../store'

export default {
    components: {
        DimensionIcon,
        IconBlock,
        RightButton
    },
    computed: {
        submitHighlight: ({isValid}) => isValid
        ? '0b0'
        : 'b00'
    },
    immutable: true,
    methods: {
        selectDimension(
            index
        ) {
            routes.navigateToPage(routes.DIMENSION_LIST)
        },
        submit() {
            navigateOnValid(this, routes.CREATE_POLL_NAME_LOG_DATE)
        }
    },
    oncreate() {
        const form = ensureChildForm(
            'NameLocationsTimeframe', 'dimensions',
            this, routes.CREATE_POLL_NAME_LOG_DATE)
    },
    ondestroy() {
        clearForm(this)
    },
    store: () => store
}

</script>