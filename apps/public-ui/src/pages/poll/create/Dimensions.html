{#if form}
<form class="pure-form">
    <fieldset>
        <IconBlock
            fieldGroup="{form.fields.first}"
            on:select="selectDimension('first')"
        >
            <div slot="icon">
                <DimensionIcon
                ></DimensionIcon>
            </div>
            <div slot="text">
            Select 1st Dimension
            </div>
        </IconBlock>
        <IconBlock
            fieldGroup="{form.fields.second}"
            on:select="selectDimension('second')"
        >
            <div slot="icon">
                <DimensionIcon
                ></DimensionIcon>
            </div>
            <div slot="text">
            Select 2nd Dimension
            </div>
        </IconBlock>
        <IconBlock
            fieldGroup="{form.fields.third}"
            on:select="selectDimension('third')"
        >
            <div slot="icon">
                <DimensionIcon
                ></DimensionIcon>
            </div>
            <div slot="text">
            Select 3rd Dimension
            </div>
        </IconBlock>
        <div class="pure-controls">
            <RightButton
                classes="submitButton"
                highlightColor="{submitHighlight}"
                on:select="submit()"
            ></RightButton>
        </div>
    </fieldset>
</form>
{/if}



<script>
import RightButton from '../../../common/control/button/RightButton.html'
import IconBlock from '../../../common/field/IconBlock.html'
import DimensionIcon from '../../../common/icon/DimensionIcon.html'
import * as forms from '../../../forms'
import * as routes from '../../../routes'
import store from '../../../store'

export default {
    components: {
        DimensionIcon,
        IconBlock,
        RightButton
    },
    computed: {
        submitHighlight: ({isValid}) => isValid
        ? '0b0'
        : 'b00'
    },
    immutable: true,
    methods: {
        selectDimension(
            dimensionName
        ) {
            const dimensionForm = this.get().form.fields[dimensionName]

            forms.setForm(forms.CREATE_DIMENSION, dimensionForm)

            routes.navigateToPage(routes.CREATE_DIMENSION)
        },
        submit() {
            forms.navigateOnValid(this, routes.CREATE_POLL_NAME_LOC_DATE)
        }
    },
    oncreate() {
        forms.ensureChildForm(
            forms.CREATE_POLL_TOP, 'dimensions',
            this, routes.CREATE_POLL_NAME_LOC_DATE)
    },
    ondestroy() {
        forms.clearForm(this)
    },
    store: () => store
}

</script>