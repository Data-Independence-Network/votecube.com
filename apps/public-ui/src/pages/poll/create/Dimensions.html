{#if form}
<form class="pure-form">
    <fieldset>
        <SelectionBlock
            dimension="{first}"
            text="{form.text.first}"
            on:select="selectDimension(first)"
        ></SelectionBlock>
        <SelectionBlock
            dimension="{second}"
            text="{form.text.second}"
            on:select="selectDimension(second)"
        ></SelectionBlock>
        <SelectionBlock
            dimension="{third}"
            text="{form.text.third}"
            on:select="selectDimension(third)"
        ></SelectionBlock>
        <div class="pure-controls">
            <RightButton
                classes="submitButton"
                highlightColor="{submitHighlight}"
                on:select="submit()"
            ></RightButton>
        </div>
    </fieldset>
</form>
{/if}
<script>
import RightButton from '../../../common/control/button/RightButton.html'
import SelectionBlock from '../../../components/dimension/SelectionBlock.html'
import * as forms from '../../../forms'
import * as routes from '../../../routes'
import store from '../../../store'

export default {
    components: {
        RightButton,
        SelectionBlock
    },
    computed: {
        first: ({form}) => form
        ? form.fields.first
        : null,
        second: ({form}) => form
        ? form.fields.second
        : null,
        submitHighlight: ({isValid}) => isValid
        ? '0b0'
        : 'b00',
        third: ({form}) => form
        ? form.fields.third
        : null
    },
    immutable: true,
    methods: {
        selectDimension(
            dimensionForm
        ) {
            forms.setForm(forms.CREATE_DIMENSION, dimensionForm)
            routes.navigateToPage(routes.CREATE_DIMENSION)
        },
        submit() {
            forms.navigateOnValid(this, routes.CREATE_POLL_NAME_LOC_DATE)
        }
    },
    oncreate() {
        forms.ensureChildForm(
            forms.CREATE_POLL_TOP, 'dimensions',
            this, routes.CREATE_POLL_NAME_LOC_DATE)
    },
    ondestroy() {
        forms.clearForm(this)
    },
    store: () => store
}

</script>