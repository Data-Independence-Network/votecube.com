<tr
		on:click="fire('select', {event})"
>
	<td
			class="icon"
	>
		<figure>
			<div
					class="surface s1"
					style="
        background-color: #{getColor(0, poll, 'x')};
                        "
			></div>
			<div
					class="surface s2"
					style="
        background-color: #{getColor(0, poll, 'z')};
                        "
			></div>
			<div
					class="surface s5"
					style="
        background-color: #{getColor(0, poll, 'y')};
                        "
			></div>
		</figure>
	<td
			class="description"
	>
		<div
				class:outcomes="mode === 'outcomes'"
		>
			{poll.name}
		</div>

		{#if mode === 'factors'}
		<var>
			{getSideText(delta, 'confirm', poll, 'x', 1)}
		</var>
		<var>
			{getSideText(delta, 'confirm', poll, 'y', 1)}
		</var>
		<var>
			{getSideText(delta, 'confirm', poll, 'z', 1)}
		</var>
		{:else}

		<section>
			<var
					class="A"
			>
				{sortedOutcomes[0].outcome}
			</var>
			<var
					class="B"
			>
				{sortedOutcomes[1].outcome}
			</var>
		</section>

		{/if}
	</td>
</tr>
<style>
	div {
		color: black;
		font-weight: 500;
		overflow: hidden;
	}

	div.outcomes {
		text-align: center;
	}

	figure {
		margin: auto;
		position: relative;
		transform: rotateX(-45deg) rotateY(45deg);
		transform-style: preserve-3d;
	}

	section {
		display: flex;
		text-align: center;
		width: 100%;
	}

	section > var {
		flex-basis: 100%;
	}

	section > var:first-child {
		padding-right: 5px;
	}

	section > var:last-child {
		padding-left: 5px;
	}

	td {
		border-top: 1px solid #ddd;
	}

	td > var {
		display: block;
		padding-left: 15px;
	}

	.description {
		border-left: none;
		padding: 9px;
		width: calc(100% - 40px);
	}

	.icon {
		height: 45px;
		perspective: 350px;
		perspective-origin: 50% 80px;
		width: 45px;
	}

	figure {
		border-radius: 3px;
		margin: auto;
		height: 21px;
		width: 21px;
	}

	.s1 {
		transform: rotateX(90deg) translateZ(12px)
	}

	.s2 {
		transform: translateZ(12px)
	}

	.s5 {
		transform: rotateY(90deg) translateZ(-12px)
	}

	.surface {
		position: absolute;
		height: 22.5px;
		width: 22.5px;
		border-radius: 3px;
		border: 2px groove gray;
	}
</style>
<script>
	import {
		getColor,
		getSideText
	} from '../../../helpers/cube'

	export default {
		computed: {
			sortedOutcomes: ({poll}) => {
				const sortedOutcomes = poll.outcomes.sort((
					outcome1,
					outcome2
				) => outcome1.key > outcome2.key)

				return sortedOutcomes
			}
		},
		helpers: {
			getColor,
			getSideText
		},
		immutable: true
	}

</script>