{#if factor.valid && factor.hasChildValues}
<Block
				fieldGroup="{factor}"
				on:select="fire('select')"
>
	<div slot="content">
		<table>
			<tr>
				<td>
					<div>
						<figure
										class="colorSelection centered"
										style="
                    background-color: {selectedColor}
                "
						>
						</figure>
					</div>
				</td>
				<td>
					{factor.fields.name.value}
				</td>
			</tr>
			<tr>
				<td>
					<div>
						<PositionIcon
										classes="centered"
						></PositionIcon>
					</div>
				</td>
				<td>
					{factor.fields.topPosition.fields.name.value}
				</td>
			</tr>
			<tr>
				<td>
					<div>
						<PositionIcon
										classes="centeredUpsideDown"
						></PositionIcon>
					</div>
				</td>
				<td>
					{factor.fields.bottomPosition.fields.name.value}
				</td>
			</tr>
		</table>
	</div>
</Block>
{:else}
<IconBlock
				customError="{text.error}"
				fieldGroup="{factor}"
				on:select="fire('select')"
>
	<div slot="icon">
		<FactorIcon
		></FactorIcon>
	</div>
	<div slot="text">
		{text.label}
	</div>
</IconBlock>
{/if}

<style>

	td > div {
		position: relative;
		min-height: 55px;
	}

	td:first-child {
		width: 55px;
	}

	td:nth-child(2) {
		padding-left: 5px;
		width: calc(100% - 56px);
	}

</style>

<script>
	import Block         from '../../common/field/Block.html'
	import IconBlock     from '../../common/field/IconBlock.html'
	import FactorIcon from '../../common/icon/FactorIcon.html'
	import PositionIcon from '../../common/icon/PositionIcon.html'

	export default {
		components: {
			Block,
			FactorIcon,
			PositionIcon,
			IconBlock
		},
		computed: {
			bottomPosition: ({factor}) => factor
				? factor.fields.bottomPosition
				: null,
			color: ({factor}) => factor
				? factor.fields.color
				: null,
			selectedColor: ({color}) => {
				if (!color || !color.valid) {
					return 'initial'
				}
				const value = color.value.picker

				return `rgb(${value.red}, ${value.green}, ${value.blue})`
			},
			submitHighlight: ({isValid}) => isValid
				? '0b0'
				: 'b00',
			topPosition: ({factor}) => factor
				? factor.fields.topPosition
				: null
		},
	}
</script>