<nav
				class:active="active"
				id="menu"
>
	<section
					class="pure-menu"
	>
		<ul class="pure-menu-list">
			{#each menuItems as menuItem, index}
			<MenuItem
							index="{index}"
							menuItem="{menuItem}"
							on:select="selectMenu(event)"
							selectedIndex="{selectedMenuIndex}"
			></MenuItem>
			{/each}
		</ul>
	</section>
	<div
					id="sizer"
	></div>

</nav>
<style>
	section {
		margin-top: 44px;
	}
</style>
<script>
	import * as routes from '../../routes'
	import store       from '../../store.js';
	import MenuItem    from './MenuItem.html'

	export default {
		components: {
			MenuItem
		},
		data() {
			return {
				menuItems: [{
					index: 0,
					key: routes.POLL_SEARCH_LIST,
					name: 'Polls'
				}, {
					index: 1,
					key: routes.POLL_INFO_MAIN,
					params: routes.DEFAULT_ROUTE_PARAMS,
					name: 'Create Poll',
				}
				],
				selectedMenuIndex: 0
			}
		},
		methods: {
			// clickMenuLink(event) {
			// if (DOM_API.e(menuElementIdSelector)
			//   .className
			//   .indexOf('active') !== -1) {
			//   this.toggleAll(event)
			// }
			// },
			selectMenu(menuItem) {
				this.set({selectedMenuIndex: menuItem.index})
				this.fire('selected', menuItem)
			}
		},
		oncreate() {
			this.store.set({emInPx: getEmInPx()})
		},
		store: () => store
	}

	function getEmInPx() {
		var div          = document.getElementById('sizer');
		div.style.height = '1em';
		return div.offsetHeight;
	}
</script>